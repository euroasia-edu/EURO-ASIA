---
import BaseLayout from "../../layouts/BaseLayout.astro";
import "../../styles/global.css";

export async function getStaticPaths() {
  const langs = ['ro', 'en', 'it', 'es', 'pt', 'fr', 'de'];
  return langs.map(lang => ({
    params: { lang },
    props: { lang }
  }));
}

const { lang } = Astro.props;
let t;

try {
  const module = await import(`../../i18n/${lang}/services.js`);
  t = module.default.services;
} catch {
  const fallback = await import("../../i18n/ro/services.js");
  t = fallback.default.services;
}

// FIX: Import dinamic bazat pe lang (RO pentru toate, EN când există)
const contentLang = ['en', 'ro', 'it', 'es', 'pt', 'fr', 'de'].includes(lang) ? lang : 'ro';


const Administrare = await import(`../../content/${contentLang}/services/administrare.mdx`);
const Cazare = await import(`../../content/${contentLang}/services/cazare.mdx`);
const Transport = await import(`../../content/${contentLang}/services/transport.mdx`);
const Instruire = await import(`../../content/${contentLang}/services/instruire.mdx`);
const Activitati = await import(`../../content/${contentLang}/services/activitati/activitati.mdx`);
const ARimini = await import(`../../content/${contentLang}/services/activitati/rimini.mdx`);
const ASanMarino = await import(`../../content/${contentLang}/services/activitati/sanmarino.mdx`);
const AVenetia = await import(`../../content/${contentLang}/services/activitati/venetia.mdx`);
const AOptional = await import(`../../content/${contentLang}/services/activitati/optional.mdx`);
const AExcursii = await import(`../../content/${contentLang}/services/activitati/excursii.mdx`);
const Organizare = await import(`../../content/${contentLang}/services/organizare.mdx`);
---

<BaseLayout title={t.title} lang={lang}>
<section class="services-section">
  <div class="container">
    <Administrare.default class="scroll-animate" />
    <Instruire.default class="scroll-animate slide-left" />
    <Transport.default class="scroll-animate slide-right" />
    <Cazare.default class="scroll-animate" />
    <Activitati.default class="scroll-animate slide-left" />
    <ARimini.default class="scroll-animate slide-right" />
    <ASanMarino.default class="scroll-animate" />
    <AVenetia.default class="scroll-animate slide-left" />
    <AOptional.default class="scroll-animate" />
    <AExcursii.default class="scroll-animate slide-right" />
    <Organizare.default class="scroll-animate" />
  </div>
</section>
<script is:inline>
  const blocks = document.querySelectorAll('.block');
  
  // INIT - INVIZIBIL + slide MINIM
  blocks.forEach(block => {
    block.style.opacity = '0';
    block.style.transition = 'all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
    
    // Slide MAI SUBTIL pentru grid
    if (block.classList.contains('reverse')) {
      block.style.transform = 'translateX(30px)';
    } else {
      block.style.transform = 'translateX(-30px)';
    }
  });
  
  // SCROLL - FADE + centru
  const checkScroll = () => {
    blocks.forEach(block => {
      const rect = block.getBoundingClientRect();
      if (rect.top < window.innerHeight * 0.8 && block.style.opacity === '0') {
        block.style.opacity = '1';
        block.style.transform = 'translateX(0)';
      }
    });
  };
  
  window.addEventListener('scroll', checkScroll);
  window.addEventListener('load', checkScroll);
  checkScroll();
</script>


</BaseLayout>
